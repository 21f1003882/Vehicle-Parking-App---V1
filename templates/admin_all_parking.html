{% extends "base.html" %}
{% block title %}All Parking History{% endblock %}
{% block content %}
<h3 class="mb-3">All Parking Bookings</h3>
<div class="card shadow-sm">
  <div class="card-body">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>User</th>
          <th>Car Plate</th>
          <th>Area</th>
          <th>Spot</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Status</th>
          <th>Cost</th>
        </tr>
      </thead>
      <tbody>
        {% for booking in bookings %}
          <tr>
            <td>{{ booking.user.username }}</td>
            <td>{{ booking.car.license_plate }}</td>
            <td>{{ booking.spot.parking_area.name }}</td>
            <td>{{ booking.spot.spot_identifier }}</td>
            <td>{{ booking.start_time.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ booking.end_time.strftime('%Y-%m-%d %H:%M') if booking.end_time else 'N/A' }}</td>
            <td>
              <span class="badge bg-{{ 'success' if booking.status == 'completed' else 'warning' }}">
                {{ booking.status|capitalize }}
              </span>
            </td>
            <td>â‚¹{{ '%.2f'|format(booking.total_cost) if booking.total_cost else 'N/A' }}</td>
          </tr>
        {% else %}
          <tr>
            <td colspan="8" class="text-center text-muted">No booking history found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}